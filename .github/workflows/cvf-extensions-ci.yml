name: CVF Extensions CI

on:
  push:
    paths:
      - 'EXTENSIONS/CVF_v1.7_CONTROLLED_INTELLIGENCE/**'
      - 'EXTENSIONS/CVF_v1.7.1_SAFETY_RUNTIME/**'
      - 'EXTENSIONS/CVF_v1.7.2_SAFETY_DASHBOARD/**'
      - 'EXTENSIONS/CVF_v1.7.3_RUNTIME_ADAPTER_HUB/**'
  pull_request:
    paths:
      - 'EXTENSIONS/CVF_v1.7_CONTROLLED_INTELLIGENCE/**'
      - 'EXTENSIONS/CVF_v1.7.1_SAFETY_RUNTIME/**'
      - 'EXTENSIONS/CVF_v1.7.2_SAFETY_DASHBOARD/**'
      - 'EXTENSIONS/CVF_v1.7.3_RUNTIME_ADAPTER_HUB/**'

jobs:
  # â”€â”€â”€ v1.7 Intelligence Module â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  intelligence-tests:
    name: "ğŸ§  v1.7 Intelligence Tests"
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: EXTENSIONS/CVF_v1.7_CONTROLLED_INTELLIGENCE
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm install
      - run: npx vitest run

  # â”€â”€â”€ v1.7.1 Safety Runtime â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  safety-runtime-tests:
    name: "âš™ï¸ v1.7.1 Safety Runtime Tests"
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: EXTENSIONS/CVF_v1.7.1_SAFETY_RUNTIME
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm install
      - run: npx vitest run

  # â”€â”€â”€ v1.7.2 Safety Dashboard â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  safety-dashboard-build:
    name: "ğŸ›¡ï¸ v1.7.2 Safety Dashboard Build"
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: EXTENSIONS/CVF_v1.7.2_SAFETY_DASHBOARD
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm install
      - run: npx vitest run
      - run: npm run build

  # â”€â”€â”€ v1.7.3 Runtime Adapter Hub â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  runtime-adapter-hub-tests:
    name: "ğŸ”Œ v1.7.3 Runtime Adapter Hub Tests"
    runs-on: ubuntu-latest
    defaults:
      run:
        working-directory: EXTENSIONS/CVF_v1.7.3_RUNTIME_ADAPTER_HUB
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: 20
      - run: npm install
      - run: npx vitest run
      - run: npm run typecheck
