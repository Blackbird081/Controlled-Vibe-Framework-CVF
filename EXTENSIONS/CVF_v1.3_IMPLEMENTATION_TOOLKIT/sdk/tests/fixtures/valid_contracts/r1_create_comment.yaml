name: Create Comment Skill
version: "1.0.0"
metadata:
  description: "R1 - Create limited resource (comment)"
  author: "test-suite"
  created_at: "2026-01-29"

risk_level: R1
human_required: false

input_schema:
  type: object
  properties:
    post_id:
      type: string
      description: "Post identifier"
    content:
      type: string
      description: "Comment text"
      maxLength: 5000
    user_id:
      type: string
      description: "User making the comment"
  required: ["post_id", "content", "user_id"]

output_schema:
  type: object
  properties:
    comment_id:
      type: string
    created_at:
      type: string
      format: "date-time"
    status:
      type: string
      enum: ["created", "pending_review"]

permissions:
  scope: "post:{post_id}:comments"
  required_approval: false
  allowed_users:
    - pattern: "user_*"

execution:
  handler: "create_comment_handler"
  timeout_seconds: 60
  idempotency:
    key: "post_id,user_id,content"
    ttl_seconds: 3600

audit:
  log_level: "INFO"
  fields: ["post_id", "user_id", "created_at", "status"]
